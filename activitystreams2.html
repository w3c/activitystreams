<!DOCTYPE html>
<html>
<head>
  <title>Activity Streams 2.0</title>
  <meta charset="UTF-8" />
  <script src="http://www.w3.org/Tools/respec/respec-w3c-common" async class="remove"></script>
  <script class="remove">
  var respecConfig = {
    specStatus: "ED",
    edDraftURI: "http://jasnell.github.io/w3c-socialwg-activitystreams/activitystreams2.html",
    shortName: "activitystreams-core",
    editors: [
      {
        name: "James M Snell",
        url: "http://chmod777self.com",
        company: "IBM",
        companyUrl: "http://ibm.com"
      }
    ],
    additionalCopyrightHolders: ["Activity Streams Working Group", "IBM"],
    maxTocLevel: 2,
    previousMaturity: "FPWD",
    previousPublishDate:  "2014-10-23",
    wg: "Social Web Working Group",
    wgURI: "http://www.w3.org/Social/WG",
    wgPublicList: "public-socialweb",
    wgPatentURI: "http://www.w3.org/2004/01/pp-impl/72531/status",
    localBiblio:  {
      "AS1": {
        title: "JSON Activity Streams 1.0",
        href: "http://activitystrea.ms/specs/json/1.0/",
        authors:  [
          "J. Snell", 
          "M. Atkins",
          "W. Norris",
          "C. Messina",
          "M. Wilkinson",
          "R. Dolin"
        ],
        status:   "unofficial",
        publisher:  "http://activitystrea.ms"
      }
    },
    otherLinks: [{
      key: 'Repository',
      data: [
        {
          value: 'Github',
          href: 'https://github.com/jasnell/w3c-socialwg-activitystreams'
        }, 
        {
          value: 'Issues',
          href: 'https://github.com/jasnell/w3c-socialwg-activitystreams/issues'
        }, 
        {
          value: 'Commits',
          href: 'https://github.com/jasnell/w3c-socialwg-activitystreams/commits/master'
        }
      ]
    }]
  };
  </script>
  <style>
    thead {
      background: #005A9C;
      color: white;
    }
    thead th {
      font-weight: normal;
    }
    table, td, th { border: 1px solid gray }
    table { width: 100% ;}
    td { 
      vertical-align: top;
      padding: 5px; 
    }
  </style>
</head>
<body>

  <section id="abstract">
    <p>
      This specification details a model for representing potential and
      completed activities using the JSON format.
    </p>
    <section id="authorsnote" class="informative">
      <h2>Author's Note</h2>
      <p>
        This draft is heavily influenced by the JSON Activity
        Streams 1.0 specification originally co-authored by Martin
        Atkins, Will Norris, Chris Messina, Monica Wilkinson, Rob Dolin and
        James Snell.  The author is very thankful for their significant
        contributions and gladly stands on their shoulders.  Some portions of
        the original text of Activity Streams 1.0 are used in this document.
      </p>
    </section>
  </section>

  <section id="sotd">
  </section>

  <section id="introduction">
    <h2>Introduction</h2>
    <p>
      In the most basic sense, an "Activity" is a semantic description of
      a completed or ongoing action. It is the goal of this specification 
      to provide a JSON-based syntax that is sufficient to express metadata 
      about activities in a rich, human-friendly but machine-processable and 
      extensible manner.  This can include constructing natural-language 
      descriptions or visual representations about the activity, associating 
      actionable information with various types of objects, communicating or 
      recording activity logs, or delegation of potential actions to other
      applications.
    </p>

    <p>
      The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in [[!RFC2119]].
    </p>

    <section id="activitystreams-1.0" class="informative">

      <h2>Relationship to JSON Activity Streams 1.0</h2>

      <p>
        The JSON Activity Streams 1.0 [[!AS1]] specification was
        published in May of 2011 and provided a baseline extensible syntax
        for the expression of completed activities.  This specification
        builds upon that initial foundation by incorporating lessons learned
        through extensive implementation, community feedback and related 
        ongoing work from a variety of other communities.
      </p>

      <p>
        While the syntax defined by this specification diverges from 
        that defined by JSON Activity Streams 1.0, the fundamental model
        defined by that original specification remains intact. Specific
        <a href="#deprecated-syntax">processing rules</a> are defined by
        this specification that allow existing Activity Streams 1.0 
        documents to be mapped to and processed as an Activity Streams 2.0
        document.
      </p>

      <p>
        This specification incorporates several existing extensions to the
        1.0 syntax directly into the 2.0 model.  These include portions of
        the Activity Streams 1.0 Base Schema, Audience
        Targeting, Responses, and Priority extensions.
      </p>
    </section>

    <section id="syntaxconventions">

      <h2>Serialization Notes</h2>

      <p>
        This specification describes a JSON-based [[!RFC7159]] serialization
        syntax for the <a href="activitystreams2-vocabulary.html">Activity 
        Vocabulary</a> that follows the conventions defined by the 
        [[!JSON-LD]] specification. While serialization forms other than 
        JSON-LD are possible, alternatives are not discussed by this 
        document.
      </p>

      <p>
        When serialized, absent properties are represented by either (a)
        setting the property value to null, or (b) by omitting the property
        declaration altogether at the option of the publisher; these
        representations are semantically equivalent.  If a property has an
        array value, the absence of any items in that array MUST be
        represented by omitting the property entirely or by setting the value
        to null. The appropriate interpretation of an omitted or explicitly 
        null value is that no value has been assigned as opposed to the view 
        that the given value is empty or nil. 
      </p>

      <p>
        This specification uses IRIs [[!RFC3987]].  Every URI [[!RFC3986]] is 
        also an IRI, so a URI may be used wherever an IRI is named.  There are 
        two special considerations: (1) when an IRI that is not also a URI is 
        given for dereferencing, it MUST be mapped to a URI using the steps in 
        Section 3.1 of [[!RFC3987]] and (2) when an IRI is serving as an "id" 
        value, it MUST NOT be so mapped.
      </p>

      <p>
        Unless otherwise specified, all properties with date and time values
        MUST conform to the "date-time" production in [[!RFC3339]], with an
        uppercase "T" character used to separate date and time, and an
        uppercase "Z" character in the absence of a numeric time zone offset.
        All such timestamps SHOULD be represented relative to Coordinated
        Universal Time (UTC).
      </p>

      <p>
        Activity Streams 2.0 documents MUST be serialized using the UTF-8
        character encoding.
      </p>

      <p>
        The serialized JSON form of an Activity Streams 2.0 document MUST 
        be consistent with what would be produced by the standard
        JSON-LD 1.0 Processing Algorithms and API [[!JSON-LD-API]] Compaction
        Algorithm using, at least, the normative JSON-LD @context definition provided 
        <a href="activitystreams2-context.jsonld">here</a>. Implementations 
        MAY augment the provided @context with additional @context definitions
        but MUST NOT override or change the normative context. Implementations MAY also 
        include in the serialized JSON document additional properties and values
        not defined in the JSON-LD @context with the understanding that any such
        properties will likely be unsupported and ignored by consuming implementations
        that use the standard JSON-LD algorithms. See the <a href="#extensibility">Extensibility</a>
        section for more information on handling extensions within Activity Streams 2.0
        documents.
      </p>

    </section>

  </section>

  <section id="examples" class="informative">
    <h2>Examples</h2>

    <p>
      Following are three examples of activities with varying degrees of detail. Each of the examples uses an implied JSON-LD @context equal to that provided <a href="activitystreams2-context.jsonld">here</a>.
    </p>

    <p>
      Note that the Activity Streams JSON-LD @context maps the prefix "<code>as:</code>" to the 
      base URI "<code>http://www.w3.org/ns/activitystreams#</code>". This means that terms such 
      as "<code>as:Activity</code>" are equivalent to the expanded form 
      "<code>http://www.w3.org/ns/activitystreams#Activity</code>". In order to best illustrate
      that implementors MUST support both forms, both the compact and expanded forms are used 
      interchangeably by the examples in this document.
    </p>

    <section id="example-1">
      <h2>Minimal Activity</h2>
      
      <figure>
      <figcaption>
        Expresses the statement <code>'urn:example:person:martin' posted
        'http://example.org/foo.jpg'</code>.  No additional detail is given.
      </figcaption>

<pre class="example highlight json">{
  "@context": "http://www.w3.org/ns/activitystreams",
  "@type": "Post",
  "actor": "urn:example:person:martin",
  "object": "http://example.org/foo.jpg"
}</pre>
      </figure>

    </section>

    <section id="example-2">
      <h2>Basic activity with some additional detail</h2>

      <figure>
      <figcaption>
        Expresses the statement "Martin Smith posted an article to the blog
        'Martin's Blog' at 3:04 PM GMT on February 2, 2011."  Some additional
        details about the article, actor and target blog are given using properties
        defined by the <a href="activitystreams2-vocabulary.html">Activity Streams 2.0
        Vocabulary</a>.
      </figcaption>
<pre class="example highlight json">{
  "@context": "http://www.w3.org/ns/activitystreams",
  "@type": "Post",
  "published": "2011-02-10T15:04:55Z",
  "actor": {
   "@type": "Person",
   "@id": "urn:example:person:martin",
   "displayName": "Martin Smith",
   "url": "http://example.org/martin",
   "image": {
     "@type": "Link",
     "href": "http://example.org/martin/image.jpg",
     "mediaType": "image/jpeg"
   }
  },
  "object" : {
   "@id": "urn:example:blog:abc123/xyz",
   "@type": "Article",
   "url": "http://example.org/blog/2011/02/entry",
   "displayName": "Why I love Activity Streams"
  },
  "target" : {
   "@id": "http://example.org/blog/",
   "@type": "urn:example:types:blog",
   "displayName": "Martin's Blog"
  }
}</pre>
    </figure>

    </section>

    <section id="example-3">

      <h2>An extended activity</h2>

      <figure>
      <figcaption>
        A more extensive, single-entry "Activity Stream" follows.
      </figcaption>

<pre class="example highlight json">
{
  "@context": "http://www.w3.org/ns/activitystreams",
  "@type": "Collection",
  "totalItems": 1,
  "items" : [
    {
      "@type": "Post",
      "published": "2011-02-10T15:04:55Z",
      "generator": "http://example.org/activities-app",
      "provider": "http://example.org/activity-stream",
      "displayNameMap": {
        "en": "Martin posted a new video to his album.",
        "ga": "Martin phost le fisean nua a albam."
      },
      "actor": {
        "@type": "Person",
        "@id": "urn:example:person:martin",
        "displayName": "Martin Smith",
        "url": "http://example.org/martin",
        "image": {
          "@type": "Link",
          "href": "http://example.org/martin/image",
          "mediaType": "image/jpeg",
          "width": 250,
          "height": 250
        }
      },
      "object" : {
        "@type": "Image",
        "@id": "http://example.org/album/my_fluffy_cat",
        "image": {
          "@type": "Link",
          "href": "http://example.org/album/my_fluffy_cat_thumb.jpg",
          "mediaType": "image/jpeg",
          "rel": "preview"
        },
        "url": [
          {
            "@type": "Link",
            "href": "http://example.org/album/my_fluffy_cat.jpg",
            "mediaType": "image/jpeg"
          },
          {
            "@type": "Link",
            "href": "http://example.org/album/my_fluffy_cat.png",
            "mediaType": "image/png"
          }
        ]
      },
      "target": {
        "@type": "Album",
        "@id": "http://example.org/album/",
        "displayNameMap": {
          "en": "Martin's Photo Album",
          "ga": "Grianghraif Mairtin"
        },
        "image": {
          "@type": "Link",
          "href": "http://example.org/album/thumbnail.jpg",
          "mediaType": "image/jpeg"
        }
      }
    }
  ]
}
</pre></figure>
    </section>
  </section>

  <section id="model">
    <h2>Model</h2>

    <p>
      The <a href="activitystreams2-vocabulary.html">Activity Vocabulary</a>
      defines the abstract model for Activity Streams 2.0. The vocabulary 
      is segmented into a one set of six core class and an extended set of 
      Activity and Object types common to most "Social" Web applications. The
      core classes include: <a>Object</a>, <a>Link</a>, <a>Actor</a>, <a>Activity</a>,
      <a>Collection</a> and <a>OrderedCollection</a>. Each of these classes 
      is described and illustrated below. The extended Activity and Object 
      types are defined normatively in the Activity Vocabulary specification.
    </p>

    <section id="object">
      <h2><dfn title="Object" id="asobject">Object</dfn></h2>

      <p>
        The <code><a href="activitystreams2-vocabulary.html#dfn-object">Object</a></code> 
        class is the primary base class for the Activity Streams vocabulary.
      </p>

      <p>
        In addition to having a global identifier in the form of an absolute IRI 
        using the JSON-LD <code>@id</code> keyword, and an "object type" (expressed 
        using the JSON-LD <code>@type</code> keyword), all instances of the <code>Object</code> 
        class share a common set of properties as defined by the 
        <a href="activitystreams2-vocabulary.html">Activity Vocabulary</a>. These include:
        <code>
          <code><a href="activitystreams2-vocabulary#dfn-alias">alias</a></code> | 
          <code><a href="activitystreams2-vocabulary#dfn-attachedto">attachedTo</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-attachment">attachment</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-attributedto">attributedTo</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-attributedwith">attributedWith</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-content-term">content</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-content">contentMap</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-displayname">displayName</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-displayname">displayNameMap</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-endtime">endTime</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-generator">generator</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-generatorof">generatorOf</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-icon">icon</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-image-term">image</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-inreplyto">inReplyTo</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-instrumentof">instrumentOf</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-memberof">memberOf</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-location">location</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-locationof">locationOf</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-objectof">objectOf</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-preview">preview</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-previewof">previewOf</a></code> |f
          <code><a href="activitystreams2-vocabulary#dfn-provider">provider</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-providerof">providerOf</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-published">published</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-rating">rating</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-resultof">resultOf</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-replies">replies</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-scope">scope</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-scopeof">scopeOf</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-starttime">startTime</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-summary">summary</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-summary">summaryMap</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-tag">tag</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-tagof">tagOf</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-targetof">targetOf</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-title">title</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-title">titleMap</a></code> |
          <code><a href="activitystreams2-vocabulary#dfn-updated">updated</a></code> | 
          <code><a href="activitystreams2-vocabulary#dfn-url">url</a></code>
        </code>
      </p>

      <p>
        Previous versions of the Activity Streams format used the <code>objectType</code> 
        property to identify the action type. The <code>objectType</code> MUST NOT be used 
        within an Activity Streams 2.0 document to represent object type.
      </p>

      <p>
        While all properties are optional, all <code>Object</code> instances SHOULD
        at least contain either <code><a href="activitystreams2-vocabulary.html#dfn-displayname">displayName</a></code> or <code><a href="activitystreams2-vocabulary.html#def-displayname">displayNameMap</a></code>.
      </p>

<figure><figcaption>Following is an example Object that uses the JSON-ID <code>@id</code> and <code>@type</code>
JSON-LD keywords to express the global identifier and object type:</figcaption>
<pre class="example highlight json">
{
  "@context": "http://www.w3.org/ns/activitystreams",
  "@id": "http://example.org/foo",
  "@type": "Note",
  "displayName": "This is a note",
  "attributedTo": {
    "@id": "urn:example:person:joe",
    "@type": "Person",
    "displayName": "Joe Smith"
  },
  "published": "2014-08-21T12:34:56Z"
}
</pre></figure>

      <p>
        Implementations MUST treat all object types in an Activity Streams document as 
        subclasses of <a>Object</a> unless the object is a <a>Link</a>.
      </p>

<figure><figcaption>For instance, in the following example, the value of <code>actor</code> is
considered to be an instance of <a>Object</a> while the value of <code>object</code> is not:</figcaption>
<pre class="example highlight json">{
  "@context": "http://www.w3.org/ns/activitystreams",
  "@id": "http://example.org/foo",
  "@type": "Share",
  "displayName": "A Test",
  "actor": {
    "@type": "Person",
    "@id": "http://example.org/~sally",
    "displayName": "Sally"
  },
  "object": {
    "@type": "Link",
    "href": "http://example.org/posts/1"
  }
}</pre></figure>

     <p>
       The <a href="activitystreams2-vocabulary.html">Activity Vocabulary</a> defines a broad
       range of <code>Object</code> types that are common to many "Social" Web applications. 
       This specification stops short of defining semantically specific properties for most
       of these objects. External vocabularies can be used to express additional detail not 
       covered by the Activity Vocabulary.
     </p>

     <p>
      Furthermore, while implementations are free to introduce new types of Objects beyond those 
      defined by the Activity Vocabulary, interoperability issues can arise when applications 
      rely too much on extension types that are not recognized by other implementations. Care 
      should be taken to not unduly overlap with or duplicate the existing Object types. For 
      instance, some vocabularies (e.g. The Good Relations Vocabulary) define their own classes 
      for describing locations. An implementation that wishes, for example, to use a 
      <code><a href="http://www.heppnetz.de/ontologies/goodrelations/v1.html#Location">http://purl.org/goodrelations/v1#Location</a></code> as an Object SHOULD identify that 
      Object as being both a <code><a href="activitystreams2-vocabulary.html#dfn-place">Place</a></code> and an 
      <code>http://purl.org/goodrelations/v1#Location</code>, as 
      illustrated in the following:
     </p>

     <figure><figcaption>An Object that is both a <code>Place</code> and a <code>gr:Location</code>:</figcaption>
<pre class="example highlight json">{
  "@context": [
    "http://www.w3.org/ns/activitystreams",
    {
      "gr": "http://purl.org/goodrelations/v1#"
    }
  ],
  "@type": ["Place", "gr:Location"],
  "displayName": "Sally's Restaurant",
  "longitude": 12.34,
  "latitude": 56.78,
  "gr:category": "restaurants/french_restaurants"
}</pre></figure>
  
     <p>
       Certain properties defined by some External Vocabularies can overlap or duplicate those
       defined by the Activity Vocabulary. Where such overlap exists, for the sake of consistent 
       interoperability, implementers MUST use the properties defined by the Activity Vocabulary.
     </p>

   </section>

    <section id="naturalLanguageValues">

      <h2>Natural Language Values</h2>

      <p>
        Several properties defined by the <a href="activitystreams2-vocabulary.html">Vocabulary</a>
        are defined as having natural language values. These are a representations of human-readable character sequences using one or more languages. Within the JSON-LD serialization, they are expressed as either (1) a single JSON string or (2) a JSON object mapping [[RFC5646]] Language-Tags to localized, equivalent translations of the same string value. In [[JSON-LD]], such constructs are referred to as "Language Maps". In the serialized JSON-LD, these two forms 
        are differentiated using a simple property naming convention, for instance: "<code>displayName</code>" identifies the JSON string form for the <code><a href="activitystreams2-vocabulary.html#dfn-displayname">displayName</a></code> property while "<code>displayNameMap</code>" represents the Language Map form.
      </p>

      <figure>
        <figcaption>A single displayName String value without language information:</figcaption>
<pre class="example highlight json">{
  <b>"displayName": "This is the title"</b>
}</pre></figure>

      <figure>
        <figcaption>Multiple, language-specific values:</figcaption>
<pre class="example highlight json">{
  <b>"displayNameMap": {
    "en": "This is the title",
    "fr": "C'est le titre",
    "sp": "Este es el titulo"
  }</b>
}</pre></figure>

      <p>
        Every key in the Language Map form MUST be a valid [[RFC5646]] Language-Tag.
        The associated values MUST be Strings.
      </p>

      <p>
        The <a href="activitystreams2-vocabulary.html">Activity Vocabulary</a> defines
        four specific natural language values: 
        <code><a href="activitystreams2-vocabulary.html#dfn-displayname">displayName</a></code>,
        <code><a href="activitystreams2-vocabulary.html#dfn-title">title</a></code>,
        <code><a href="activitystreams2-vocabulary.html#dfn-summary">summary</a></code>, and
        <code><a href="activitystreams2-vocabulary.html#dfn-content">content</a></code>. 
        Accordingly, the Activity Streams <a href="activitystreams2-context.jsonld">JSON-LD
        @context</a> definition respectively maps the terms "<code>displayName</code>",
        "<code>title</code>", "<code>summary</code>", and "<code>content</code>" for representing
        the JSON string forms and the terms "<code>displayNameMap</code>", "<code>titleMap</code>",
        "<code>summaryMap</code>", and "<code>contentMap</code>" for representing the Language Map
        forms. 
      </p>

      <p>
        The default language for document or an individual object can be established
        using the JSON-LD <code>@language</code> keyword within a <code>@context</code>
        definition. For instance:
      </p>

      <figure>
        <figcaption>Establishing a default language context:</figcaption>
<pre class="example highlight json">{
  "@context": [
    "http://www.w3.org/ns/activitystreams",
    {"@language": "en"}
  ],
  "displayName": "This is the title"
}</pre></figure>

      <p>
        The JSON-LD format generally supports one additional way of associating 
        language tag information with a literal string value using what JSON-LD
        calls a "value object", as illustrated below:
      </p>

<figure>
        <figcaption>Specifying language in a JSON-LD value object:</figcaption>
<pre class="example highlight json">{
  "@context": "http://www.w3.org/ns/activitystreams",
  "displayName": {
    "@value": "This is the title",
    "@language": "en"
  }
}</pre></figure>

      <p>
        While Activity Streams 2.0 implementations MAY use JSON-LD value 
        objects in this manner, doing so is strongly discouraged. Implementations
        SHOULD, instead, use the Language Map form. The one situation where use of
        the value object cannot be avoided is when a default language context 
        has been established and a particular language-sensitive field needs to 
        be explicitly excluded from that context, as in the following example:
      </p>

<figure>
        <figcaption>Excluding a natural language property from the language context:</figcaption>
<pre class="example highlight json">{
  "@context": [
    "http://www.w3.org/ns/activitystreams",
    { "@language": "en" }
  ],
  "displayName": {
    "@value": "This is the title",
    "@language": null
  }
}</pre></figure>

    </section>

    <section id="link">
      <h2><dfn title="Link">Link</dfn></h2>

      <p><mark>Ed. Note: This section has been refactored per the ongoing discussion
      around how to model links. This revised approach allows both unqualified direct
      links and qualified indirect links to be used, with as:Link becoming the mechanism
      for describing qualified indirect links. It is a fairly controversial change because
      there are some on the WG who believe that qualified indirect links are necessary, 
      while there are some who believe they are useful.</mark></p>

      <p>
        A <code>Link</code> describes a qualified reference to another resource and
        is closely related to the conceptual model of Links as established 
        in [[!RFC5988]].
      </p>

      <p>
        The target URI of the Link is expressed using the required
        <code><a href="activitystreams2-vocabulary.html#dfn-href">href</a></code> keyword. 
        In addition, all <code>Link</code> instances share the following common set of 
        optional properties as defined by the 
        <a href="activitystreams2-vocabulary.html">Activity Vocabulary</a>:
          <code><a href="activitystreams2-vocabulary.html#dfn-displayname">displayName</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-displayname">displayNameMap</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-hreflang">hreflang</a></code> | 
          <code><a href="activitystreams2-vocabulary.html#dfn-mediatype">mediaType</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-rel">rel</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-title">title</a></code> | 
          <code><a href="activitystreams2-vocabulary.html#dfn-title">titleMap</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-height">height</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-width">width</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-duration">duration</a></code> |

          <code><a href="activitystreams2-vocabulary.html#dfn-actorof">actorOf</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-attachedto">attachedTo</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-attributedwith">attributedWith</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-generatorof">generatorOf</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-iconfor">iconFor</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-imageof">imageOf</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-instrumentof">instrumentOf</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-locationof">locationOf</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-memberof">memberOf</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-objectof">objectOf</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-optionof">optionOf</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-participantof">participantOf</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-previewof">previewOf</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-providerof">providerOf</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-resultof">resultOf</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-scopeof">scopeOf</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-tagof">tagOf</a></code> |
          <code><a href="activitystreams2-vocabulary.html#dfn-targetof">targetOf</a></code>
      </p>

      <p>
        For example, all <a title="Object">Objects</a> can contain an 
        <code><a href="activitystreams2-vocabulary.html#dfn-image-term">image</a></code> 
        property whose value describes a graphical representation of the containing 
        object.  This property will typically be used to provide the URL to an image 
        (e.g. JPEG, GIF or PNG) resource that can be displayed to the user.  Any given 
        object might have multiple such visual representations -- multiple screenshots,
        for instance, or the same image at different resolutions. In Activity Streams 2.0, 
        there are essentially three ways of describing such references.
      </p>

      <figure><figcaption>To reference a single image without any additional metadata, 
      a direct association can be expressed as a JSON string containing an absolute
      or relative IRI.</figcaption>
<pre class="example highlight json">{
  "@context": "http://www.w3.org/ns/activitystreams",
  "@type": "Application",
  "@id": "http://example.org/application/123",
  "displayName": "My Application",
  <b>"image": "http://example.org/application/123.png"</b>
}</pre></figure>

      <figure><figcaption>
        Alternatively, if additional metadata is required (such as the MIME 
        content type of the referenced resource) a <a>Link</a> can be used:
      </figcaption>
<pre class="example highlight json">{
  "@context": "http://www.w3.org/ns/activitystreams",
  "@type": "Application",
  "@id": "http://example.org/application/123",
  "displayName": "My Application",
  <b>"image": {
    "@type": "Link",
    "href": "http://example.org/application/123.png",
    "mediaType": "image/png"
  }</b>
}</pre></figure>

      <p>
        Formally, the former example establishes an unqualified 
        direct relationship with the image resource while the 
        latter creates a qualified, indirect relationship that allows 
        additional properties about the relationship to be specified. Such properties 
        (e.g. <code>mediaType</code>, <code>hreflang</code>, <code>rel</code>, 
        etc) describe the <a>Link</a> itself as opposed to describing the 
        referenced resource. For many practical applications, this distinction 
        will likely be fairly insignificant but it is still worth keeping in mind.
      </p>

      <figure><figcaption>
        If more than one value is to be expressed, A JSON Array with a
        mix of strings and <a>Link</a>s can be used:
      </figcaption>
<pre class="example highlight json">{
  "@context": "http://www.w3.org/ns/activitystreams",
  "@type": "Application",
  "@id": "http://example.org/application/123",
  "displayName": "My Application",
  <b>"image": [
    "http://example.org/application/abc.gif",
    {
      "@type": "Link",
      "href": "http://example.org/application/123.png",
      "mediaType": "image/png"
    }
  ]</b>
}</pre></figure>
      
      <p>
        Individual items contained in such an array are independent of the
        others and no significance is given to the ordering.
      </p>

      <p>
        RFC 5988 defines that all Links have a "link relation" that describes
        the contextual purpose of the link.  Within a <a>Link</a>,
        the <code><a href="activitystreams2-vocabulary.html#dfn-rel">rel</a></code> property 
        provides the link relation value. If no <code>rel</code> property is
        specified, the link relation is considered to be unspecified.
      </p>

      <p>
        In the following example, two separate references are provided.  The link
        relation of the first is unspecified, while the link relation of the
        second is "<code>preview</code>".  Either, however, can be used as 
        alternative visual representations of the object.
      </p>

      <figure><figcaption></figcaption>
<pre class="example highlight json">{
  "@context": "http://www.w3.org/ns/activitystreams",
  "@type": "Application",
  <b>"image": [
    "http://example.org/foo.jpg",
    {
      "@type": "Link",
      "href": "http://example.org/screens/1.jpg",
      "rel": "preview",
      "mediaType": "image/jpeg"
    }
  ]</b>
}</pre></figure>

      <p>
        It ought to be noted that the [[!HTML5]] specification provides it's own alternative
        definition of a "link relation" that differs slightly from the [[RFC5988]] definition.
        In the HTML5 definition, any string that does not contain the "space" U+0020, "tab" (U+0009), 
        "LF" (U+000A), "FF" (U+000C), "CR" (U+000D) or "," (U+002C) characters can be used as a 
        valid link relation. To promote interoperability, Activity Streams 2.0 implementations 
        MUST only use link relations that are valid in terms of both the [[RFC5988]] and
        [[HTML5]] definitions.
      </p>

      <p>
        Note that the <a>Link</a> and <a>Object</a> classes are disjoint from one 
        another. That is, any given <a>Object</a> cannot also be a <a>Link</a>. 
      </p>

    </section>

    <section id="actors">
      <h2><dfn title="Actor" id="actor">Actor</dfn></h2>

      <p>
        Actor objects are specializations of the base <a>Object</a>
        type that represent entities capable of carrying out an 
        Activity. The <a>Actor</a> class is the base class for all
        Actor objects. The <a href="activitystreams2-vocabulary">Activity
        Vocabulary</a> provides the normative definition of eight specific 
        types of Actors:
        <code><a href="activitystreams2-vocabulary.html#dfn-application">Application</a></code> |
        <code><a href="activitystreams2-vocabulary.html#dfn-device">Device</a></code> |
        <code><a href="activitystreams2-vocabulary.html#dfn-group">Group</a></code> |
        <code><a href="activitystreams2-vocabulary.html#dfn-organization">Organization</a></code> |
        <code><a href="activitystreams2-vocabulary.html#dfn-person">Person</a></code> |
        <code><a href="activitystreams2-vocabulary.html#dfn-process">Process</a></code> |
        <code><a href="activitystreams2-vocabulary.html#dfn-role">Role</a></code> |
        <code><a href="activitystreams2-vocabulary.html#dfn-service">Service</a></code>.
      </p>

      <p>
        This specification intentionally defines Actors in only the most generalized
        way, stopping short of defining semantically specific properties for each. 
        All Actor objects are specializations of <code><a>Object</a></code> and inherit
        all of the core properties common to all Object's. External vocabularies
        (VCard for instance) can be used to express additional detail not covered
        by the Activity Vocabulary.
      </p>

      <figure><figcaption>An Activity with a Person actor:</figcaption>
<pre class="example highlight json">{
  "@context": "http://www.w3.org/ns/activitystreams",
  "@type": "Share",
  "actor": {
    "@type": "Person",
    "@id": "acct:sally@example.org",
    "displayName": "Sally Smith"
  },
  "object": {
    "@type": "Note",
    "content": "This is a simple note"
  }
}</pre></figure>

      <figure><figcaption>An Activity with a Person actor extended with VCard properties:</figcaption>
<pre class="example highlight json">{
  "@context": "http://www.w3.org/ns/activitystreams",
  "@type": "Share",
  "actor": {
    "@type": "Person",
    "@id": "acct:sally@example.org",
    "displayName": "Sally Smith",
    "vcard:given-name": "Sally",
    "vcard:family-name": "Smith"
  },
  "object": {
    "@type": "Note",
    "content": "This is a simple note"
  }
}</pre></figure>

      <p>
        While implementations are free to introduce new types of Actors beyond 
        those defined by the Activity Vocabulary, interoperability issues can arise
        when applications rely too much on extension types that are not recognized 
        by other implementations. Care should be taken to not unduly overlap with or
        duplicate the existing Actor types. For instance, some vocabularies (e.g. VCard) 
        define their own classes for describing people. An implementation that wishes, 
        for example, to use a <code>vcard:Individual</code> as an Actor SHOULD identify 
        that Actor as being <em>both</em> a 
        <code><a href="activitystreams2-vocabulary.html#dfn-person">Person</a></code> and 
        an <code>vcard:Individual</code>, as illustrated in the following:
      </p>

      <figure><figcaption>An Actor that is both a <code>Person</code> and a <code>vcard:Individual</code>:</figcaption>
<pre class="example highlight json">{
  "@context": "http://www.w3.org/ns/activitystreams",
  "@type": "Share",
  "actor": {
    "@type": ["Person", "vcard:Individual"],
    "@id": "acct:sally@example.org",
    "displayName": "Sally Smith",
    "vcard:given-name": "Sally",
    "vcard:family-name": "Smith"
  },
  "object": {
    "@type": "Note",
    "content": "This is a simple note"
  }
}</pre></figure>

    </section>

    <section id="activities">
      <h2><dfn title="Activity" id="activity">Activity</dfn></h2>

      <p>
        Activity objects are specializations of the base <a>Object</a>
        type that provide information about ongoing or completed actions.
      </p>

      <p>
        In additional to common properties supported by all <a>Object</a>
        instances, <code>Activity</code> objects support the following additional
        properties defined by the <a href="activitystreams2-vocabulary.html">Vocabulary</a>:
          <code><a href="activitystreams2-vocabulary.html#dfn-actor">actor</a></code> | 
          <code><a href="activitystreams2-vocabulary.html#dfn-object-term">object</a></code> | 
          <code><a href="activitystreams2-vocabulary.html#dfn-target">target</a></code> | 
          <code><a href="activitystreams2-vocabulary.html#dfn-result">result</a></code> | 
          <code><a href="activitystreams2-vocabulary.html#dfn-instrument">instrument</a></code> | 
          <code><a href="activitystreams2-vocabulary.html#dfn-participant">participant</a></code> | 
          <code><a href="activitystreams2-vocabulary.html#dfn-priority">priority</a></code> | 
          <code><a href="activitystreams2-vocabulary.html#dfn-status">status</a></code> | 
          <code><a href="activitystreams2-vocabulary.html#dfn-to">to</a></code> | 
          <code><a href="activitystreams2-vocabulary.html#dfn-bto">bto</a></code> | 
          <code><a href="activitystreams2-vocabulary.html#dfn-cc">cc</a></code> | 
          <code><a href="activitystreams2-vocabulary.html#dfn-bcc">bcc</a></code>
      </p>

      <p>
        The JSON-ID <code>@type</code> keyword is used to identify the type 
        of action the Activity Statement represents. Previous versions of the
        Activity Streams format used the <code>verb</code> property to identify
        the action type. The <code>verb</code> MUST NOT be used within an 
        Activity Streams 2.0 Activity to represent the action type.
      </p>

      <figure><figcaption>The following example illustrates a simple Activity:</figcaption>
<pre class="example highlight json"><code>{
  "@context": "http://www.w3.org/ns/activitystreams",
  "@type": "Like",
  "@id": "urn:example:activity:1",
  "actor": "http://example.org/profiles/joe",
  "object": "http://example.com/notes/1",
  "published": "2014-09-30T12:34:56Z"
}
</code></pre></figure>

      <p>
        The <a href="activitystreams2-vocabulary.html">Activity Vocabulary</a> defines a broad
        range of <code>Activity</code> types that are common to many "Social" Web applications. 
        This specification stops short of defining semantically specific properties for most
        of these activities. External vocabularies can be used to express additional detail not 
        covered by the Activity Vocabulary.
      </p>

      <p>
        Furthermore, while implementations are free to introduce new types of Activites beyond those 
        defined by the Activity Vocabulary, interoperability issues can arise when applications 
        rely too much on extension types that are not recognized by other implementations. Care 
        should be taken to not unduly overlap with or duplicate the existing Activity types. For 
        instance, some vocabularies (e.g. Schema.org) define their own classes for describing actions. 
        An implementation that wishes, for example, to use
        <code><a href="http://schema.org/ShareAction">http://schema.org/ShareAction</a></code> 
        as an Activity SHOULD identify that Object as being both a 
        <code><a href="activitystreams2-vocabulary.html#dfn-share">Share</a></code> and an 
        <code>http://schema.org/ShareAction</code>, as illustrated in the following:
      </p>

       <figure><figcaption>An Activity that is both a <code>Share</code> and a <code>http://schema.org/ShareAction</code>:</figcaption>
<pre class="example highlight json"><code>{
  "@context": [
    "http://www.w3.org/ns/activitystreams",
    {
      "s": "http://schema.org/"
    }
  ],
  "@type": ["Share","s:ShareAction"],
  "@id": "urn:example:activity:1",
  "actor": "http://example.org/profiles/joe",
  "object": "http://example.com/notes/1",
  "published": "2014-09-30T12:34:56Z"
}
</code></pre></figure>

      <section id="audienceTargeting">

        <h2>Audience Targeting</h2>

        <p>
          Every Activity has both a Primary and Secondary audience. The
          Primary audience consists of those entities either directly involved
          in the performance of the activity or who "own" the objects involved.
          The Secondary audience consists of the collection of entities sharing
          an interest in the activity but who are not directly involved (e.g.
          "followers").
        </p>

        <p>
          For instance, suppose a social network of three individuals: Bob, Joe
          and Jane.  Bob and Joe are each friends with Jane but not friends
          with one another.  Bob has chosen to "follow" activities for which
          Jane is directly involved.  Jane shares a file with Joe.
        </p>

        <p>
          In this example, Jane and Joe are each directly involved in the file
          sharing activity and together make up the Primary Audience for that
          event.  Bob, having an interest in activities involving Jane, is the
          Secondary Audience.  Knowing this, a system that produces or consumes
          the activity can intelligently notify each person of the event.
        </p>

        <p>
          While there are means, based on the action type, actor, object and target of
          the activity, to infer the primary audience for many types of
          activities, those do not work in every case and do not provide a
          means of identifying the secondary audience.  The 
          <code><a href="activitystreams2-vocabulary.html#dfn-to">to</a></code>, 
          <code><a href="activitystreams2-vocabulary.html#dfn-cc">cc</a></code>, 
          <code><a href="activitystreams2-vocabulary.html#dfn-bto">bto</a></code> and 
          <code><a href="activitystreams2-vocabulary.html#dfn-bcc">bcc</a></code> 
          properties MAY be used within an Activity to explicitly identify the 
          Primary and Secondary audiences.
        </p>

        <p>
          The prototypical use case for an Activity containing these properties
          is the publication and redistribution of Activities through an
          intermediary.  That is, an event source generates the activity and
          publishes it to the intermediary which determines a subset of events
          to display to specific individual users or groups.  Such a
          determination can be made, in part, by identifying the Primary and
          Secondary Audiences for each activity.
        </p>

        <p>
          When the event source generates the activity and specifies values for
          the <code>to</code> and <code>cc</code> fields, the 
          intermediary SHOULD redistribute that event
          with the values of those fields intact, allowing any processor to see
          who the activity has been targeted to.  This is precisely the same
          model used by the <code>to</code> and <code>cc</code> fields in email systems.

        <p>
          There are situations, however, in which disclosing the identity of
          specific members of the audience may be inappropriate.  For instance,
          a user may not wish to let other users know that they are interested
          in various topics, individuals or types of events.  To support this
          option, an event source generating an activity MAY use the 
          <code>bto</code> and <code>bcc</code> properties to list 
          entities to whom the activity should be privately targeted.  When an 
          intermediary receives an activity containing these properties, it 
          MUST remove those values prior to redistributing the activity.  The 
          intent is that systems MUST consider entities listed within the 
          <code>bto</code> and <code>bcc</code> properties as
          part of the Primary and Secondary audience but MUST NOT disclose that
          fact to any other party.
        </p>

        <p>
          Audience targeting information included within an Activity only
          describes the intent of the activity creator.  With clear exception
          given to the appropriate handling of <code>bto</code> and 
          <code>bcc</code>, this specification leaves it up to implementations 
          to determine how the audience targeting information is used.
        </p>

      </section>

    </section>

    <section id="collections">
      <h2><dfn title="Collection" id="collection">Collection</dfn></h2>

      <p>
        Collection objects are a specialization of the base <a>Object</a>
        that contain a listing of other <a title="Object">Objects</a>.
        The Collection object is used primarily as the root of an 
        <a>Activity Streams Document</a>, but can also be used as the
        value of object properties.
      </p>

      <p>
        Collections have both a logical model and a physical serialization.
        While the logical view of a collection might contain a large number
        of objects, any single serialized representation might include only a
        subset of those objects, with specific "paging" <a title="Link">Links</a> 
        used to reference additional serialized representations that include
        additional subsets.  Such representations are known as "multi-page
        collections", with each serialized subset representing a single
        "page".
      </p>

      <p>
        In addition to the common properties shared by all <a>Object</a> instances, 
        <code>Collection</code> objects set of properties defined by the 
        <a href="activitystreams2-vocabulary">Vocabulary</a>. These include:
        <code>
          <a href="activitystreams2-vocabulary.html#dfn-items">items</a> |
          <a href="activitystreams2-vocabulary.html#dfn-totalitems">totalItems</a> |
          <a href="activitystreams2-vocabulary.html#dfn-itemsperpage">itemsPerPage</a> |
          <a href="activitystreams2-vocabulary.html#dfn-startindex">startIndex</a> |
          <a href="activitystreams2-vocabulary.html#dfn-itemsafter">itemsAfter</a> |
          <a href="activitystreams2-vocabulary.html#dfn-itemsbefore">itemsBefore</a> |
          <a href="activitystreams2-vocabulary.html#dfn-current">current</a> |
          <a href="activitystreams2-vocabulary.html#dfn-next">next</a> |
          <a href="activitystreams2-vocabulary.html#dfn-prev">prev</a> |
          <a href="activitystreams2-vocabulary.html#dfn-first">first</a> |
          <a href="activitystreams2-vocabulary.html#dfn-last">last</a> |
          <a href="activitystreams2-vocabulary.html#dfn-self">self</a>
        </code>
      </p>

      <p>
        Collections can be ordered or unordered. In the JSON-LD serialization,
        the unordered members of a Collection are represented using the 
        <code>items</code> property while the ordered members are represented using 
        the <code>orderedItems</code> property. The normative JSON-LD @context
        definition maps both the <code>items</code> and <code>orderedItems</code>
        properties to the Activity Vocabulary <code><a href="activitystreams2-vocabulary.html#dfn-items">items</a></code> term. However, the <code>orderedItems</code> property is defined in
        the JSON-LD @context as <code>@container = @list</code>, indicating that the
        items are strictly ordered.
      </p>

      <p>
        Implementations MAY used the abstract 
        <a href="activitystreams2-vocabulary#dfn-orderedcollection"><dfn>OrderedCollection</dfn></a> 
        class to explicitly identify strictly ordered collections.
      </p>

      <figure><figcaption>The following is a simple unordered collection with paging:</figcaption>
<pre class="example highlight json">
{
  "@context": "http://www.w3.org/ns/activitystreams",
  "@type": "Collection",
  "totalItems": 10,
  "itemsPerPage": 1,
  "itemsSince": "2012-12-12T12:34:56Z",
  "next": "http://example.org/foo?page=2",
  "self": "http://example.org/foo?page=1",
  "items": [
    {
      "@type": "Post",
      "actor": "urn:example:person:sally",
      "object": "http://example.org/foo"
    }
  ]
}
</pre></figure>

      <figure><figcaption>The following is a simple ordered collection with paging:</figcaption>
<pre class="example highlight json">
{
  "@context": "http://www.w3.org/ns/activitystreams",
  "@type": "OrderedCollection",
  "totalItems": 10,
  "itemsPerPage": 1,
  "itemsSince": "2012-12-12T12:34:56Z",
  "next": "http://example.org/foo?page=2",
  "self": "http://example.org/foo?page=1",
  "startIndex": 0,
  "orderedItems": [
    {
      "@type": "Post",
      "actor": "urn:example:person:sally",
      "object": "http://example.org/foo"
    }
  ]
}
</pre></figure>

      <p>
        In ordered collections that use paging, the 
        <code><a href="activitystreams2-vocabulary.html#dfn-startindex">startIndex</a></code>
        property is used to indicate the relative index position of the first item contained in
        the <code>orderedItems</code> list in the logical set of items.
        A <code>startIndex</code> of <code>0</code> indicates the first item in the collection.
      </p>

    </section>

  </section>

  <section id="document">
    <h2>Activity Streams Document</h2>

    <p>
      An <dfn title="Activity Streams Document">Activity Streams Document</dfn> 
      is a JSON-LD document whose root value is a <a>Collection</a> and 
      whose MIME media type is "<code>application/activity+json</code>".
    </p>

  </section>

  <section id="deprecated-syntax">
    <h2>Deprecated Activity Streams 1.0 Syntax</h2>

    <p>
      The JSON syntax defined by this specification differs somewhat from
      that defined in the original JSON Activity Streams 1.0
      [[!AS1]] specification in ways that are not backwards
      compatible.  Implementations can choose to continue supporting the
      JSON Activity Streams 1.0 syntax but SHOULD consider it to be
      deprecated.  This means that while implementations MAY continue to
      consume the 1.0 syntax, they SHOULD NOT output the 1.0 syntax unless
      specifically interacting with older non-2.0 compliant
      implementations.
    </p>

    <p>
      Specifically:
    </p>

    <ol>
    <li>
      Implementations MUST use the "<code>application/stream+json</code>" MIME media
      type when producing a JSON serialization using the Activity Streams 1.0
      syntax, and "<code>application/activity+json</code>"
      when producing a serialization conforming to the 2.0 syntax.
    </li>
    <li>
      Implementations that process serializations identified using either 
      the "<code>application/stream+json</code>" or the more
      generic "<code>application/json</code>" MIME media type MUST follow 
      the syntax and processing rules set by [[!AS1]].  The 2.0
      syntax and processing rules apply only when handling
      serializations using the "<code>application/activity+json</code>" media type.
    </li>
    <li>
      When processing Activity Streams 1.0 documents using a JSON-LD processing 
      model, implementations MUST use the special AS 1.0 to AS 2.0 expansion @context 
      definition provided <a href="activitystreams1-context.jsonld">here</a> to produce 
      the JSON-LD expanded representation. Refer to the 
      <a href="http://www.w3.org/TR/json-ld-api/#expansion-algorithms">JSON-LD Processing
      Algorithms and API</a> for details.
    </li>
    <li>
      When processing Activity Streams 1.0 documents and converting those to 2.0, 
      implementations MUST treat <code>id</code> as an alias for the JSON-LD 
      <code>@id</code> key word; and the <code>objectType</code> and <code>verb</code> 
      properties as aliases for the JSON-LD <code>@type</code> keyword.
    </li>
    <li>
      This document redefines the <code><a href="activitystreams2-vocabulary.html#dfn-displayname">displayName</a></code>, 
      <code><a href="activitystreams2-vocabulary.html#dfn-title">title</a></code>, 
      <code><a href="activitystreams2-vocabulary.html#dfn-content">content</a></code> and
      <code><a href="activitystreams2-vocabulary.html#dfn-summary">summary</a></code> 
      properties as natural language values which means their values can be expressed 
      as either a String or a JSON-LD Language Map. In the 1.0 syntax, these are expressed
      solely as String values.  Because the 1.0 values are a valid
      subset allowed by this specification, implementations are not
      required to take any specific action to continue supporting those
      values.
    </li>
    <li>
      This document redefines a large number of common properties
      defined originally as Objects in 1.0 as either <a title="Object">Objects</a> or 
      <a title="Link">Links</a>. The JSON-LD serialization allows such property values 
      to be expressed as either an IRI String, an JSON object, or an Array of IRI Strings
      and JSON objects. Because the 1.0 values are a valid subset allowed
      by this specification, existing implementations are not required to take
      any specific action to continue supporting those values.
    </li>
    <li>
      This specification deprecates the <code>upstreamDuplicates</code> and
      <code>downstreamDuplicates</code> properties defined by Activity Streams 1.0 
      and does not provide a replacement. This is due largely to lack of any 
      reasonable implementation evidence. While the <code>upstreamDuplicates</code>
      and <code>downstreamDuplicates</code> properties MAY continue to be used, 
      implementations SHOULD avoid them.
    </li>
    </ol>

    <p>
      By following these requirements, all JSON Activity Streams 1.0
      serializations can be processed successfully by 2.0 implementations.
    </p>

  </section>

  <section id="extensibility">

    <h2>Extensibility</h2>

      <p><mark>Ed. Note: This section has been refactored to clarify handling of
      extensions that are not declared in a JSON-LD @context as well as those that
      use mechanisms that are not compatible with JSON-LD. There should not be 
      anything too controversial here.</mark></p>

      <p>
        In Activity Streams 2.0, an "extension" is any property not defined
        by the <a href="activitystreams2-vocabulary.html">Activity Vocabulary</a>.
        Consuming implementations that encounter unfamiliar extensions
        MUST NOT stop processing or signal an error and MUST
        continue processing the items as if those properties were not
        present. Support for specific extensions can vary across implementations
        and no normative processing model for extensions is provided.
      </p>

      <p>
        While consuming implementations are not required to use the
        standard JSON-LD Processing Algorithms [[JSON-LD-API]], it is important 
        to note that the algorithms, as currently defined, will silently ignore 
        any property that is not defined in a JSON-LD @context. Implementations
        that publish Activity Streams 2.0 documents that contain extension properties
        SHOULD provide a @context definition of those extensions.
      </p>

      <p>
        It is also important to note that there are valid JSON constructs which 
        cannot be used within a JSON-LD document. For instance, JSON-LD forbids 
        "arrays of arrays" as used, for example, by the popular 
        <a href="http://geojson.org/">GeoJSON</a> specification. While implementations
        are free to use such constructs as extensions within an Activity Streams 2.0
        document, consumers that use the standard JSON-LD Processing Algorithms
        will be required to either ignore such extensions or map those to alternative
        compatible constructs prior to applying the JSON-LD algorithms. GeoJSON extensions,
        for instance, can be converted to either the <a href="http://www.w3.org/2003/01/geo/">
        W3C Basic Geo Vocabulary</a> or 
        <a href="http://www.opengeospatial.org/standards/geosparql">GeoSparql</a> 
        "Well-Known Text" representations as illustrated in the non-normative examples
        below:
      </p>

        <figure><figcaption>GeoJSON Point Coordinates:</figcaption>
<pre class="example highlight json">{
  "@type": "http://ld.geojson.org/vocab#Point",
  "coordinates": [36.74, -119.77]
}</pre></figure>

        <figure><figcaption>The Equivalent W3C Basic Geo alternative:</figcaption>
<pre class="example highlight json">{ 
  "@context": "http://www.w3.org/ns/activitystreams",
  "@type": "geo:Point",
  "geo:lat": 36.74,
  "geo:long": -119.77
}</pre></figure>

<figure><figcaption>GeoJSON Polygon Coordinates:</figcaption>
<pre class="example highlight json">{
  "@type": "http://ld.geojson.org/vocab#Polygon",
  "coordinates": [
    [
      [100.0, 0.0], 
      [101.0, 0.0], 
      [101.0, 1.0], 
      [100.0, 1.0], 
      [100.0, 0.0]
    ]
  ]
}</pre></figure>

        <figure><figcaption>The Equivalent GeoSparl Well-Known-Text alternative:</figcaption>
<pre class="example highlight json">{ 
  "@context": "http://www.w3.org/ns/activitystreams",
  "@type": "geos:Geometry",
  "geos:asWKT": "Polygon((100.0, 0.0, 101.0, 0.0, 101.0, 1.0, 100.0, 1.0, 100.0, 0.0))"
}</pre></figure>

    <section id="compact-iris">
      <h2>Handling of JSON-ID Compact IRIs</h2>

        <p>
          In JSON-LD, a "Compact IRI" is a type of shorthand notation that
          allows absolute IRI values to be split into an absolute base IRI and
          a relative token.  For instance, in the following example:
        </p>

        <figure><figcaption></figcaption>
<pre class="example highlight json">{
  "@context": {
    "foaf": "http://xmlns.com/foaf/0.1/"
  },
  "foaf:givenName": "Sam"
}</pre></figure>

        <p>
          The property name <code>foaf:givenName</code> is a Compact IRI that expands to
          "<code>http://xmlns.com/foaf/0.1/givenName</code>" when processed by a JSON-LD
          implementation.
        </p>

        <p>
          While there are differences of opinion on how extensively Compact
          IRIs ought to be used within JSON-LD document instances, JSON-LD
          implementations are required to support them.
        </p>

        <p>
          In order to simplify implementation and encourage interoperable reuse, 
          the following predefined prefixes are defined in the normative
          Activity Streams 2.0 JSON-LD @context. Implementations MUST NOT 
          redefine any of the provided prefix mappings.
        </p>

        <table>
          <tr>
            <th>Prefix</th>
            <th>Expanded</th>
          </tr>
          <tr>
            <td><code>as:</code></td>
            <td><code>http://www.w3.org/ns/activitystreams#</code></td>
          </tr>
          <tr>
            <td><code>dc:</code></td>
            <td><code>http://purl.org/dc/elements/1.1/</code></td>
          </tr>
          <tr>
            <td><code>dct:</code></td>
            <td><code>http://purl.org/dc/terms/</code></td>
          </tr>
          <tr>
            <td><code>dctypes:</code></td>
            <td><code>http://purl.org/dc/dcmitype/</code></td>
          </tr>
          <tr>
            <td><code>foaf:</code></td>
            <td><code>http://xmlns.com/foaf/0.1/</code></td>
          </tr>
          <tr>
            <td><code>vcard:</code></td>
            <td><code>http://www.w3.org/2006/vcard/ns#</code></td>
          </tr>
          <tr>
            <td><code>org:</code></td>
            <td><code>http://www.w3.org/ns/org#</code></td>
          </tr>
          <tr>
            <td><code>prov:</code></td>
            <td><code>http://www.w3.org/ns/prov#</code></td>
          </tr>
          <tr>
            <td><code>geo:</code></td>
            <td><code>http://www.w3.org/2003/01/geo/wgs84_pos#</code></td>
          </tr>
          <tr>
            <td><code>geos:</code></td>
            <td><code>http://www.opengis.net/ont/geosparql#</code></td>
          </tr>
          <tr>
            <td><code>ical:</code></td>
            <td><code>http://www.w3.org/2002/12/cal/ical#</code></td>
          </tr>
        </table>

        <p>
          For instance, the property name <code>foaf:givenName</code> would expand to
          "<code>http://xmlns.com/foaf/0.1/givenName</code>", while the property
          <code>prov:actingOnBehalfOf</code> would expand to 
          "<code>http://w3.org/ns/prov#actingOnBehalfOf</code>".
        </p>

      </section>

  </section>

  <section id="security-considerations">

  <h2>Security Considerations</h2>

  <p>
    Publishers or Consumers implementing Activity Streams as a stream of
    public data may also want to consider the potential for unsolicited
    commercial or malicious content and should take preventative measures
    to recognize such content and either identify it or not include it in
    their implementations.
  </p>

  <p>
    Publishers should take reasonable measures to ensure potentially
    malicious user input such as cross-site scripting attacks are not
    included in the Activity Streams data they publish.
  </p>

  <p>
    Consumers that re-emit ingested content to end-users MUST take
    reasonable measures if emitting ingested content to make sure
    potentially malicious ingested input is not re-emitted.
  </p>

  <p>
    Consumers that re-emit ingested content for crawling by search
    engines should take reasonable measures to limit any use of their
    site as a Search Engine Optimization loophole.  This may include
    converting untrusted hyperlinks to text or including a
    rel="nofollow" attribute.
  </p>

  <p>
    Consumers should be aware of the potential for spoofing attacks where
    the attacker publishes activities or objects with falsified property
    values with the intent of injecting malicious content, hiding or
    corrupting legitimate content, or misleading users.
  </p>

  <p>
    Activity Streams are JSON Documents and are subject to the same
    security considerations described in [[!RFC7159]].
  </p>

  <p>
    Activity Streams implementations handle URIs.  See Section 7 of
    [[!RFC3986]].
  </p>

  <p>
    Activity Streams implementations handle IRIs.  See Section 8 of
    [[!RFC3987]].
  </p>

  </section>

  <section id="iana">

    <h2>IANA Considerations</h2>

    <section id="media-type">
      <h2>The <code>application/activity+json</code> Media Type</h2>

      <p>
        This specification registers the <code><dfn title="application/activity+json">application/activity+json</dfn></code> MIME Media Type specifically for identifying documents
        conforming to the Activity Streams 2.0 format.
      </p>

      <table>
        <tr>
          <td>Type name: </td>
          <td>application</td>
        </tr>
        <tr>
          <td>Subtype name: </td>
          <td>activity+json</td>
        </tr>
        <tr>
          <td>Required parameters: </td>
          <td>None</td>
        </tr>
        <tr>
          <td>Optional parameters: </td>
          <td>None</td>
        </tr>
        <tr>
          <td>Encoding considerations: </td>
          <td>
            Resources that use the "<code>application/activity+json</code>"
            Media Type are required to conform to all of the requirements
            for the "<code>application/json</code>" Media Type and are 
            therefore subject to the same encoding considerations specified
            in Section 11 of [[!RFC7159]].
          </td>
        </tr>
        <tr>
          <td>Security considerations: </td>
          <td>As defined in this specification.</td>
        </tr>
        <tr>
          <td>Contact: </td>
          <td>James M Snell &lt;<a href="mailto:jasnell@gmail.com">jasnell@gmail.com</a>&gt;</td>
        </tr>
        </table>

    </section>

   <section id="media-type2">
      <h2>The <code>application/stream+json</code> Media Type</h2>

      <p>
        This specification registers the <code><dfn title="application/stream+json">application/stream+json</dfn></code> MIME Media Type specifically for identifying documents
        conforming to the JSON Activity Streams 1.0 [[!AS1]] format.
      </p>

      <table>
        <tr>
          <td>Type name: </td>
          <td>application</td>
        </tr>
        <tr>
          <td>Subtype name: </td>
          <td>stream+json</td>
        </tr>
        <tr>
          <td>Required parameters: </td>
          <td>None</td>
        </tr>
        <tr>
          <td>Optional parameters: </td>
          <td>None</td>
        </tr>
        <tr>
          <td>Encoding considerations: </td>
          <td>
            Resources that use the "<code>application/stream+json</code>"
            Media Type are required to conform to all of the requirements
            for the "<code>application/json</code>" Media Type and are 
            therefore subject to the same encoding considerations specified
            in Section 11 of [[!RFC7159]].
          </td>
        </tr>
        <tr>
          <td>Security considerations: </td>
          <td>As defined in [[!AS1]]</td>
        </tr>
        <tr>
          <td>Contact: </td>
          <td>James M Snell &lt;<a href="mailto:jasnell@gmail.com">jasnell@gmail.com</a>&gt;</td>
        </tr>
        </table>

    </section>

  </section>

  <section class="appendix">

    <h2>Acknowledgements</h2>

    <p>
      The author wishes to thank the Activity Streams community and
     implementers for their support, encouragement, and enthusiasm
     including but not limited to: Abdul Qabiz, Adina Levin, Adrian Chan,
     Adriana Javier, Alan Hoffman, Alex Kessinger, Alexander Ovchinnikov,
     Alexander Zhuravlev, Alexandre Loureiro Solleiro, Amy Walgenbach,
     Andres Vidal, Angel Robert Marquez, Ari Steinberg, Arjan
     Scherpenisse, Arne Roomann-Kurrik, Beau Lebens, Ben Hedrington, Ben
     Metcalfe, Ben Werdmuller, Benjamin Goering, Bill de hOra, Bo Xing,
     Bob Aman, Bob Wyman, Brett Slatkin, Brian Walsh, Brynn Evans, Charlie
     Cauthen, Chris Chabot, Chris Messina, Chris Toomey, Christian
     Crumlish, Dan Brickley, Dan Scott, Daniel Chapman, Danny Ayers, Dare
     Obasanjo, Darren Bounds, David Cramer, David Nelson, David Recordon,
     DeWitt Clinton, Douglas Pearce, Ed Summers, Elias Bizannes, Elisabeth
     Norris, Eric Marcoullier, Eric Woods, Evan Prodromou, Gee-Hsien
     Chuang, Greg Biggers, Gregory Foster, Henry Saputra, Hillary Madsen,
     Howard Liptzin, Hung Tran, Ian Kennedy, Ian Mulvany, Ivan Pulleyn,
     Jacob Kim, James Falkner, James Pike, James Walker, Jason Kahn, Jason
     Kantz, Jeff Kunins, Jeff Martin, Jian Lin, Johannes Ernst, John
     Panzer, Jon Lebkowsky, Jon Paul Davies, Jonathan Coffman, Jonathan
     Dugan, Joseph Boyle, Joseph Holsten, Joseph Smarr, Josh Brewer, Jud
     Valeski, Julien Chaumond, Julien Genestoux, Jyri Engestroem, Kaliya
     Hamlin, Kevin Marks, Laurent Eschenauer, Laurie Voss, Leah Culver,
     Libby Miller, Manu Mukerji, Mark Weitzel, Marko Degenkolb, Marshall
     Kirkpatrick, Martin Atkins, Martin Svensson, Marty Alchin, Mary
     Hoder, Matt Leventi, Matt Wilkinson, Matthias Mueller-Prove, Max
     Engel, Max Wegmueller, Melvin Carvalho, Michael Buckbee, Michael
     Chan, Michael Richardson, Michael Sullivan, Mike Macgirvin, Mislav
     Marohni&#263;, Mo Jangda, Monica Wilkinson, Nate Benes, NeilFred
     Picciotto, Nick Howard, Nick Lothian, Nissan Dookeran, Nitya
     Narasimhan, Pablo Martin, Padraic Brady, Pat Cappelaere, Patrick
     Aljord, Peter Ferne, Peter Reiser, Peter Saint-Andre, Phil Wolff,
     Philip (flip) Kromer, Richard Cunningham, Richard Zhao, Rick
     Severson, Robert Hall, Robert Langbert, Robert Dolin, Robin Cover,
     Ryan Boyd, Sam Sethi, Scott Raymond, Scott Seely, Simon Grant, Simon
     Wistow, Stephen Garcia, Stephen Sisk, Stephen Paul Weber, Steve Ivy,
     Steve Midgley, Steven Livingstone-Perez, Sylvain Carle, Sylvain
     Hellegouarch, Tantek elik, Tatu Saloranta, Tim Moore, Timothy Young,
     Todd Barnard, Tosh Meston, Tyler Gillies, Will Norris, Zach Copley,
     Laurent-Walter Goix, Matthew Marum, Andy Smith, and Zach Shepherd.
   </p>

  </section>

  <section>
    <h2>Summary of Changes</h2>
    <h3>2014-11-06</h3>
      <ul>
      <li>Refactor's Natural Language Context to address JSON-LD
      compatibility and serialization concerns. For instance, rather than
      "displayName" having a value that is *either* a string or a Language
      Map, this creates a separate "displayNameMap" for the Language Map
      case and keeps "displayName" as a String only. The JSON-LD processing
      algorithms handle this just fine and non-JSON-LD implementations end
      up with a more predictable, consistent target.</li>
      <li>Remove the "language" property</li>
      <li>Refactor as:Link, add as:href to indicate the target of the Link,
      move away from overloading @id. This ought to resolve the modeling
      issues that have been discussed.</li>
      <li>Deprecate the "verb" property in AS 2.0, use @type instead to
      represent the Activity Type. Provide clear guidelines for handling the
      "verb" property when moving from AS 1.0 to AS 2.0.</li>
      <li>Require JSON-LD compacted form using a <i>normative</i> JSON-LD @context
      definition. Forbid implementations from altering the normative JSON-LD
      @context. This will ensure that the serialized JSON will remain
      consistent for the key properties, making it easier for
      implementations that choose not to use the JSON-LD standard
      algorithms.</li>
      <li>Strengthen the MUST IGNORE requirement for extensions. Make it
      clear that implementations SHOULD define extension properties using an
      @context and spell out the consequences if they do not. Make it clear
      that there are some valid JSON constructs (arrays of arrays) that are
      not supported in JSON-LD and show an example using the one significant
      case we are currently aware of (GeoJSON).</li>
      <li>Provide a AS1-to-AS2 specific @context definition that is
      specifically for processing AS1 documents using AS2 semantics.</li>
      <li>Remove the Verb and ObjectType abstract classes. Verb is no longer
      needed with the move to @type. Verbs just become subclasses of
      as:Activity. The ObjectType definition can be handled better using
      other constructs. Overall, this simplifies our vocabulary, which is
      good.</li>
      <li>Add iCal to the JSON-LD initial context</li>
      </ul>

    <h3>2014-09-30</h3>
    <ul>
      <li>Rework serialization model to be based on JSON-LD.</li>
      <li>Updated <a href="activitystreams2-vocabulary.html">vocabulary model</a>.</li>
      <li>Remove notion of "Type Values".</li>
      <li>Redefine "Link Values" as "Link".</li>
      <li>Removed the "duplicates" property introduced in earlier AS2 drafts due to lack of any implementation evidence.</li>
      <li>Vocabulary: rename "attachments" to "attachment" and "tags" to "tag", deprecate the old names.</li>
      <li>Vocabulary: define "url", "image" and "icon" as having <a>Link</a> values. The clean up here ought to resolve the confusion over the relationship between <code>@id</code>, <code>url</code>, <code>self</code>, etc.</li>
      <li>Vocabulary: The <code>mediaType</code> and <code>rel</code> properties are defined on <a>Link</a> and not <a>Object</a>.</li>
    </ul>
  </section>

  <section id="tof"></section>

</body>
</html>